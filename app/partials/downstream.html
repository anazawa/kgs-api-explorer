<div ng-controller="downstreamCtrl">
  <header class="downstream-header">
    <h2 class="text-downstream">
      <i class="fa fa-refresh" ng-class="{'fa-spin': isPolling}"></i>
      Downstream
    </h2>
    <div class="alert" ng-show="error">{{error}}</div>
    <div class="form-group">
      <label for="query" class="text-downstream">
        <i class="fa fa-search"></i>
        Search messages
      </label>
      <input
        id="query"
        class="form-control"
        type="text"
        ng-model="query"
        ng-change="updateMessages(1)">
    </div>
  </header>
  <div class="downstream-messages">
    <ul class="list-unstyled">
      <li ng-repeat="message in entries | limitTo: entriesPerPage:first() track by $index">
        <json-formatter open="1" json="message.body"></json-formatter>
      </li>
    </ul>
    <nav>
      <ul class="list-inline pager">
        <li
          class="pager-item downstream-pager-btn"
          ng-show="previousPage() && previousPage() != firstPage()"
          ng-click="currentPage=firstPage()">
          <i class="fa fa-angle-double-left"></i>
          First
        </li>
        <li
          class="pager-item downstream-pager-btn"
          ng-show="previousPage()"
          ng-click="currentPage=previousPage()">
          <i class="fa fa-angle-left"></i>
          Previous
        </li>
        <li
          class="pager-item"
          ng-show="lastPage() > 1">
          Page {{currentPage}}/{{lastPage()}}
        </li>
        <li
          class="pager-item downstream-pager-btn"
          ng-show="nextPage()"
          ng-click="currentPage=nextPage()">
          Next
          <i class="fa fa-angle-right"></i>
        </li>
        <li
          class="pager-item downstream-pager-btn"
          ng-show="nextPage() && nextPage() != lastPage()"
          ng-click="currentPage=lastPage()">
          Last
          <i class="fa fa-angle-double-right"></i>
        </li>
      </ul>
    </nav>
  </div>
</div>


