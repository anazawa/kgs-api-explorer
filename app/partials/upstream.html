<div class="upstream" ng-controller="upstreamCtrl">
  <h2 class="text-upstream">
    <i class="fa fa-arrow-up"></i>
    Upstream
  </h2>
  <div class="alert" ng-show="error">{{error}}</div>
  <div class="upstream-message-preview">
    <json-formatter open="2" json="message"></json-formatter>
  </div>
  <form name="form" ng-submit="send(form)" novalidate>
    <div class="form-group">
      <label for="type">Type</label>
      <select
        id="type"
        class="form-control"
        ng-options="type for type in availableTypes"
        ng-model="message.type"
        ng-change="reset(form)"></select>
    </div>
    <ng-include ng-if="message" src="'partials/messages/'+message.type+'.html'"></ng-include>
    <input class="btn" type="submit" value="Send" ng-disabled="isSending">
  </form>
  <div class="upstream-messages">
    <h3 class="text-upstream">
      <i class="fa fa-history"></i>
      History
    </h3>
    <ul class="list-unstyled" ng-show="history.length">
      <li ng-repeat="message in history | orderBy: '-date' track by $index">
        <json-formatter open="1" json="message.body"></json-formatter>
      </li>
    </ul>
  </div>
</div>
 
